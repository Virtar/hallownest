<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hallownest Assistance</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #121212;
            color: #e0e0e0;
            line-height: 1.6;
        }

        .container {
            width: 85%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid #333;
        }

        .logo-container {
            display: flex;
            align-items: center;
        }

        .logo {
            height: 60px;
            margin-right: 15px;
        }

        .brand-name {
            font-size: 2rem;
            font-weight: bold;
            color: #00ff00;
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.7);
        }

        .free-tag {
            display: inline-block;
            font-size: 2.5rem;
            font-weight: bold;
            color: #00ff00;
            background-color: rgba(0, 50, 0, 0.3);
            padding: 8px 20px;
            border-radius: 30px;
            border: 3px solid #00ff00;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
            }
            50% {
                box-shadow: 0 0 25px rgba(0, 255, 0, 0.8);
            }
            100% {
                box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
            }
        }

        main {
            padding: 40px 0;
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            color: #00ff00;
            text-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
        }

        p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            max-width: 800px;
        }

        .chat-container {
            background-color: #1a1a1a;
            border-radius: 12px;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.2);
            overflow: hidden;
            max-width: 900px;
            margin: 0 auto;
        }

        .chat-header {
            background-color: #202020;
            padding: 15px 20px;
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
        }

        .chat-header h2 {
            margin: 0;
            color: #00ff00;
            text-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
        }

        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
        }

        .message {
            margin-bottom: 20px;
            padding: 12px 16px;
            border-radius: 8px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .user-message {
            background-color: #303030;
            margin-left: auto;
            border-left: 4px solid #00ff00;
        }

        .bot-message {
            background-color: #242424;
            border-left: 4px solid #00aa00;
        }

        .chat-input-container {
            display: flex;
            padding: 15px;
            background-color: #202020;
            border-top: 1px solid #333;
        }

        .chat-input {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 8px;
            background-color: #303030;
            color: #e0e0e0;
            font-size: 1rem;
        }

        .chat-input:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 255, 0, 0.5);
        }

        .send-button {
            margin-left: 10px;
            padding: 12px 20px;
            background-color: #00aa00;
            color: #ffffff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .send-button:hover {
            background-color: #00ff00;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.7);
        }

        footer {
            text-align: center;
            padding: 30px 0;
            border-top: 1px solid #333;
            margin-top: 40px;
            color: #888;
            font-size: 0.9rem;
        }

        /* Glow effect for interactive elements */
        button:focus, input:focus {
            outline: none;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.7);
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        ::-webkit-scrollbar-thumb {
            background: #00aa00;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #00ff00;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                width: 95%;
            }

            h1 {
                font-size: 2.2rem;
            }

            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <img src="logo.png" alt="Hallownest Assistance Logo" class="logo" id="logo">
                <span class="brand-name">Hallownest Assistance</span>
            </div>
            <div class="free-tag">Free!</div>
        </header>

        <main>
            <h1>Welcome to Hallownest Assistance</h1>
            <p>Your friendly digital assistant, ready to provide you with information and support. Simply type your questions below and get instant responses.</p>
            
            <div class="chat-container">
                <div class="chat-header">
                    <h2>Chat with Hallownest Assistant</h2>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message bot-message">
                        Greetings, traveler! I'm your Hallownest Assistant. How may I assist you in your journey today?
                    </div>
                </div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input" id="messageInput" placeholder="Type your message here..." autocomplete="off">
                    <button class="send-button" id="sendButton">Send</button>
                </div>
            </div>
        </main>

        <footer>
            Â© 2025 Hallownest Assistance. All rights reserved. Providing solutions.
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chatMessages = document.getElementById('chatMessages');
            const messageInput = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendButton');
            
            // API configuration
            const API_KEY = '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'; 
            const API_URL = 'https://api.openai.com/v1/chat/completions'; // Endpoint corregido para ChatGPT
            
            // Function to add a message to the chat
            function addMessage(text, isUser) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                messageDiv.classList.add(isUser ? 'user-message' : 'bot-message');
                messageDiv.textContent = text;
                chatMessages.appendChild(messageDiv);
                
                // Scroll to the bottom of the chat
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            // Add typing indicator
            function showTypingIndicator() {
                const typingDiv = document.createElement('div');
                typingDiv.classList.add('message', 'bot-message', 'typing-indicator');
                typingDiv.innerHTML = '<span>Typing</span><span class="dot">.</span><span class="dot">.</span><span class="dot">.</span>';
                typingDiv.id = 'typingIndicator';
                chatMessages.appendChild(typingDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            // Remove typing indicator
            function removeTypingIndicator() {
                const typingIndicator = document.getElementById('typingIndicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
            }
            
            // Process user input and generate response
            async function processMessage() {
                const userMessage = messageInput.value.trim();
                if (userMessage === '') return;
                
                // Add user message to chat
                addMessage(userMessage, true);
                messageInput.value = '';
                
                // Show typing indicator
                showTypingIndicator();
                
                try {
                    // Call the external chatbot API
                    const response = await callChatbotAPI(userMessage);
                    
                    // Remove typing indicator and add bot response
                    removeTypingIndicator();
                    addMessage(response, false);
                } catch (error) {
                    // Handle errors
                    removeTypingIndicator();
                    addMessage("I'm sorry, there was an error processing your request. Please try again later.", false);
                    console.error('Error:', error);
                }
            }
            
            // Call the external chatbot API
            async function callChatbotAPI(message) {
                // If the API is not available, fall back to local responses
                if (!navigator.onLine) { 
                    return generateFallbackResponse(message);
                }
                
                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${API_KEY}`
                        },
                        body: JSON.stringify({
                            model: "gpt-4",
                            messages: [
                                {
                                    role: "system",
                                    content: "You are the Hallownest Assistant, a helpful AI themed after the game Hollow Knight. Use references to the game when appropriate, and adopt a slightly mystical, knowledgeable tone that fits the atmosphere of Hallownest. Be concise but helpful."
                                },
                                {
                                    role: "user",
                                    content: message
                                }
                            ],
                            max_tokens: 150
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    return data.choices[0].message.content || "I'm not sure how to respond to that.";
                } catch (error) {
                    console.error('API call failed:', error);
                    return generateFallbackResponse(message);
                }
            }
            
            // Generate a fallback response based on user input when API is unavailable
            function generateFallbackResponse(userMessage) {
                const lowerCaseMessage = userMessage.toLowerCase();
                
                // Enhanced predefined responses with Hollow Knight theme
                if (lowerCaseMessage.includes('hello') || lowerCaseMessage.includes('hi') || lowerCaseMessage.includes('hey')) {
                    return 'Greetings, traveler! How may I assist you in your journey today?';
                } else if (lowerCaseMessage.includes('how are you')) {
                    return 'I am well, thank you for asking. The pale light guides my service to you. How may I help?';
                } else if (lowerCaseMessage.includes('what is hallownest')) {
                    return 'Hallownest is a once-great kingdom beneath the surface, now fallen to ruin. In the game Hollow Knight, it is the setting where the silent protagonist journeys through ancient caverns, fungal wastes, and forgotten cities. In our context, Hallownest Assistance serves as your guide through information much like the Knight traverses the kingdom.';
                } else if (lowerCaseMessage.includes('hollow knight')) {
                    return 'Hollow Knight is a critically acclaimed metroidvania game developed by Team Cherry. It takes place in the forgotten kingdom of Hallownest, filled with secrets and challenges. Would you like to know more about the game or a specific aspect of it?';
                } else if (lowerCaseMessage.includes('help')) {
                    return 'I can provide information on various topics, answer questions, or simply chat. Feel free to ask me about Hallownest, gaming, or any other subject you\'re curious about!';
                } else if (lowerCaseMessage.includes('thank')) {
                    return 'You\'re most welcome! Should you need further guidance on your path, do not hesitate to ask.';
                } else if (lowerCaseMessage.includes('goodbye') || lowerCaseMessage.includes('bye')) {
                    return 'Farewell for now. May you find what you seek in the depths of Hallownest and beyond.';
                } else if (lowerCaseMessage.includes('hornet')) {
                    return 'Hornet is a major character in Hollow Knight, known for her needle and thread. She is the protector of Hallownest\'s ruins and challenges the Knight during their journey. "SHAW!" is her iconic battle cry.';
                } else if (lowerCaseMessage.includes('silksong')) {
                    return 'Silksong is the highly anticipated sequel to Hollow Knight where players control Hornet. While many await its release, I can only provide information based on what has been officially announced.';
                } else {
                    return 'An interesting query from beyond the wastes. The Hallownest Archives may not contain this knowledge yet, but I am always learning. Perhaps you could rephrase or ask about something else?';
                }
            }
            
            // Event listeners
            sendButton.addEventListener('click', processMessage);
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    processMessage();
                }
            });
            
            // Add CSS for typing indicator
            const style = document.createElement('style');
            style.textContent = `
                .typing-indicator {
                    display: flex;
                    align-items: center;
                }
                .typing-indicator .dot {
                    animation: typingAnimation 1.4s infinite;
                    display: inline-block;
                    margin: 0 2px;
                }
                .typing-indicator .dot:nth-child(2) {
                    animation-delay: 0.2s;
                }
                .typing-indicator .dot:nth-child(3) {
                    animation-delay: 0.4s;
                }
                @keyframes typingAnimation {
                    0% { opacity: 0.2; }
                    20% { opacity: 1; }
                    100% { opacity: 0.2; }
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>
